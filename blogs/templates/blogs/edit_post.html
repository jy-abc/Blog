{% extends 'blogs/base.html' %}

{% block content %}
    <div class="card-header" style="display: flex; align-items: center; gap: 10px;">
        <a href="{% url 'blogs:blog' blog.id %}" class="btn" style="text-decoration: none;">← 返回</a>
        <h2 style="color: #667eea; margin: 0;">编辑博文</h2>
    </div>
    
    <div class="card-body">
        <form action="{% url 'blogs:edit_post' post.id %}" method="post" id="editForm" onsubmit="return confirmSave()">
            {% csrf_token %}
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #555;">
                    博文内容：
                </label>
                {{ form.text }}
                {% if form.text.errors %}
                    <div style="color: #f5576c; font-size: 14px; margin-top: 5px;">
                        {{ form.text.errors }}
                    </div>
                {% endif %}
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button type="submit" class="btn" style="flex: 2;">保存更改</button>
                <a href="{% url 'blogs:blog' blog.id %}" class="btn btn-secondary" style="flex: 1; text-align: center;" onclick="return confirm('是否取消编辑')">取消</a>
            </div>
        </form>
    </div>
    
    <script>
        function confirmSave() {
            const content = document.querySelector('textarea').value;
            if (!content.trim()) {
                alert('博文内容不能为空！');
                return false;
            }
            return confirm('确定要保存对这篇博文的更改吗？');
        }
    </script>
{% endblock content %}