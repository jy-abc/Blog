{% extends 'blogs/base.html' %}

{% block content %}
    <div class="card-header">
        <h2 style="color: #667eea;">欢迎来到博客系统</h2>
    </div>
    
    <div class="card-body">
        {% for blog in blogs %}
            <div class="card" style="margin-bottom: 25px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h3 style="margin-bottom: 10px;">
                        <a href="{% url 'blogs:blog' blog.id %}" style="color: #667eea; text-decoration: none;">{{ blog.name }}</a>
                    </h3>
                    <small style="color: #888;">创建于 {{ blog.date_added|date:"Y-m-d" }}</small>
                </div>
                
                {% for post in blog.post_set.all %}
                    <div style="border-left: 3px solid #667eea; padding-left: 15px; margin: 15px 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <strong style="color: #555;">{{ post.text|truncatewords:30 }}</strong>
                            <small style="color: #888;">{{ post.date_added|date:'M d, Y H:i' }}</small>
                        </div>
                    </div>
                {% empty %}
                    <div style="text-align: center; padding: 20px; color: #888;">
                        <p>暂无博文</p>
                    </div>
                {% endfor %}
            </div>
        {% empty %}
            <div class="card" style="text-align: center; padding: 40px;">
                <h3 style="color: #888;">暂无博客</h3>
                <p style="color: #aaa; margin-top: 10px;">还没有人创建博客。</p>
                {% if user.is_authenticated %}
                    <a href="{% url 'blogs:new_blog' %}" class="btn" style="margin-top: 15px;">创建我的博客</a>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% endblock content %}